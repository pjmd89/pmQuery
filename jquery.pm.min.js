function arrayQuery( array ){this._array=array;this._position=0;this.length=array.length;};arrayQuery.prototype={"_array":null,"_field":null,"_order":null,"length":null,"find":function( field , search ){var arr=[];var filter=function( value ){if( typeof value[field]=="string"&&( value[field]).toLowerCase().indexOf( search.toLowerCase() ) >=0 ){arr.push(value);}else if(typeof value[field]=="number"&&value[field]==search ){arr.push(value);}};this._array.filter( filter );return new arrayQuery( arr );},"_objectExists":function( haystack , needle ){var send=false;for( var i in haystack ){if(haystack[i]==needle){send=true;}}return send;},"findArray":function( search ){var arr=[];for( var i in this._array ){for(var o in this._array[i]){if(typeof this._array[i][o]=="string"&&(this._array[i][o]).toLowerCase().indexOf(search.toLowerCase()) >=0 ){if( !this._objectExists( arr, this._array[i] ) ){arr.push(this._array[i]);}}else if(typeof this._array[i][o]=="number"&&this._array[i][o]==search ){if( !this._objectExists( arr, this._array[i] ) ){arr.push(this._array[i]);}}}}return new arrayQuery( arr );},"get":function(){return this._array;},"slice":function( length , start ){start=(!start ? 0 : start);return new arrayQuery( this._array.slice( start , length ) );},"sort":function( field , order ){order=(!order ? 1 : order);var sort={"generic":function(a,b){switch(order){case 1:return ( ( a[field]==b[field] ) ? 0 : ( ( a[field] > b[field] ) ? 1 : -1 ) );break;default:return ( ( a[field]==b[field] ) ? 0 : ( ( a[field] < b[field] ) ? 1 : -1 ) );}},"object":function(a,b){}};if( (this._array).length > 0 ){switch(typeof this._array[0][field]){case "string":case "number":this._array.sort( sort.generic );break;}}return this;}};$(function(){$.widget("cpf.getUsers",{"options":{"url":"?controller=get_user","appendTo":"body","parent":null,"onSelectUser":function(){}},"_create":function(){var that=this;var callbacks=["onSelectUser"];$(callbacks).each(function( i , a ){if(typeof that.options[this]!="function"){that.options[this]=function(){};}});},"_init":function(){var that=this;$.ajax({"url":that.options.url,"success":function( data ){that._ready( data );}});},"_ready":function( data ){var that=this;$(this.element).autocomplete({"source":data,"appendTo":that.options.appendTo});$(this.element).bind("autocompleteselect",{"parent":that.options.parent},that.options.onSelectUser);}});});$(function(){$.widget("cpf.jusers",{"options":{"attrId":"data-userid"},"_create":function(){var that=this;var callbacks=[];$(callbacks).each(function( i , a ){if(typeof that.options[this]!="function"){that.options[this]=function(){};}});$(this.element).attr("data-cpf-jusers","true");},"_init":function(){var that=this;var userId=$(this.element).attr(this.options.attrId);if(userId){cpfStandardUser.get( this._setToolTip , this , userId );}},"_setToolTip":function( data, that ){var html="";if( data.length==1 ){var usuario=data[0];html +="<div class='cpf-userinfo cpf-user-image'><img src='"+usuario.picture+"' /></div>";html +="<div class='cpf-userinfo'>";html +="<div>"+usuario.label+" ("+usuario.edad+" años)</div>";html +="<div>"+usuario.documento_identidad.norm+"</div>";html +="<div>Cr. "+usuario.creditos.disponible+" disponible</div>";html +="<div>Cr. "+usuario.creditos.confirmado+" confirmado</div>";html +="</div>";}else{html +="Se ha producido un error al buscar la <br>información del usuario seleccionado";}$(that.element).jtooltip({"html":html});},"_destroy":function(){$(this.element).removeAttr("data-cpf-jusers");},"destroyAll":function(){$.pm.jtooltip().destroyAll();var allElements=$("*[data-cpf-jusers='true']");if(allElements.length > 0 ){$(allElements).each(function(){$(this).jusers("destroy");});}}});});cpfStandardUser={"data":null,"url":"?controller=get_user","load":false,"wait":false,"interval":null,"get":function( func , obj , id ){if(this.load==false&&this.wait==false){this.wait=true;this._load(func,  obj, id);}else if( this.load==true&&this.wait==false){this.sendData(func,  obj, id);}else if(this.load==true&&this.wait==true){this._interval(func, obj, id);}else if(this.load==false&&this.wait==true){this._interval(func,  obj, id);}},"_interval":function(func,  obj, id){var that=this;var interval=setInterval(function(){if(that.load){clearInterval(interval);that.sendData(func,  obj, id);}},10);},"sendData":function(func,  obj, id){if( id ){var arr=new arrayQuery(this.data);func(arr.find('id_base', id).get() , obj );}else{func(this.data , obj );}},"reload":function(){this._load();},"_load":function( func , obj , id){var that=this;this.wait=true;$.ajax({"url":that.url,"success":function( data ){that.wait=false;that.load=true;that.data=data;if( func ){that.sendData(func, obj, id);}}});}};$(function(){$.widget("pm.countLimit",{options:{"inputLimit":"default","limit":600},_create:function(){var tagName=($(this.element).prop("tagName")).toLowerCase(),characterCount=0,elementType=0,characters="",me=this;if(tagName!="input"&&tagName!="textarea" ){elementType="text";}else{elementType="val";}$(this.element).keypress(function(k){var returned=true;if(k.keyCode!=8 ){characterCount=$(this)[elementType]().length;if(characterCount >=(me.options.limit + 1)){characters=$(this)[elementType]().substring(0,me.options.limit);$(this)[elementType](characters);returned=false;}}return returned;});this.setInputLimit( this.element , this.options.limit , 0 , this.options.inputLimit);$(this.element).bind("keydown",{"el":this.element,"elementType":elementType,"me":me},this.keypress);$(this.element).bind("keyup",{"el":this.element,"elementType":elementType,"me":me},this.keypress);},"keypress":function(k){var returned=true,characterCount=0,inputLimit=k.data.me.options.inputLimit,el=k.data.el,elementType=k.data.elementType,limit=k.data.me.options.limit,setInputLimit=k.data.me.setInputLimit,characters="";characterCount=$(el)[elementType]().length;if(k.keyCode!=8 ){if(characterCount >=(limit + 1)){characters=$(el)[elementType]().substring(0,limit);$(el)[elementType](characters);returned=false;}}setInputLimit( el , limit , characterCount , inputLimit );return returned;},"setInputLimit":function( el , limit , characterCount , inputLimit ){var input=$("#"+$(el).attr("id")+"_count_limit");var count=limit - characterCount;if(inputLimit!="default"){input=$(inputLimit);}if(input.length > 0 ){if(count < 0 ){count=0;}input.val( count );}}});});$(function(){$.widget("pm.dialog",{options:{"modal":true,"buttons":{},"close":{}},"_modalId":"",_create:function(){this._modalId="_modalId_"+(Math.floor(Math.random() * (9999999999 - 1000000000 + 1)) + 1000000000);this._modal=$("<div />",{"id":this._modalId,"class":"sct-modal","style":"opacity:0;filter:alpha=0;"});this._modal.attr("tabindex","0");this._dialog=$("<div />",{"class":"sct-dialog"});if(this.options.modal==true ){var modalBackground=$("<div />",{"class":"sct-modal-background"});this._modal.append(modalBackground);}this._modal.append(this._dialog);this._dialog.append(this.element);$(document.body).append(this._modal);this.setSize(this._dialog);$("#"+this._modalId).bind("keyup",{"that":this},this.closeOnEscape);$(window).bind("resize",{"that":this},this.windowResize);var that=this;setTimeout(function(){that._modal.removeAttr("style");},300);},"closeOnEscape":function(k){if( k.keyCode==27 ){k.data.that.close();}},_setOptions:function(){},_setOption:function( key , value ){},"close":function(){$("#"+this._modalId).attr("style","opacity:0;filter:alpha=0;");var me=this;setTimeout(function(){if(typeof me.options.close=="function"){me.options.close();}$("#"+me._modalId).remove();},300);},"windowResize":function( event ){event.data.that.setSize(event.data.that._dialog);},"setSize":function(me){var width=me.width(),height=me.height(),windowWidth=$(window).width(),windowHeight=$(window).height(),left=(windowWidth / 2) - (width / 2),top=(windowHeight / 2 ) - (height / 2) - 70;me.css("left",left+"px");me.css("top",top+"px");}});});$(function(){$.widget("pm.getStates",{options:{"stateSelect":""},_create:function(){var stateSelect=this.options.stateSelect;$(this.element).change(function(){if($(this).val()){$.ajax({"url":"?controller=get_states&country="+$(this).val(),"dataType":"json","success":function( data ){var options="<option>Seleccione un estado</option>";for( row in data){options+="<option value='"+data[row].value+"'>"+data[row].label+"</option>";}$(stateSelect).html(options);}});}else{var options="<option>Seleccione un país</option>";$(stateSelect).html(options);}});}});});$(function(){$.widget("pm.imageToBlob",{options:{"label":null,"accept":"image/jpeg, image/jpg, image/png","name":"picture","imageMessage":"Sombree la imagen para seleccionar el fragmento de ésta que será mostrado en tu perfil.","close":"","save":"","labelText":"No ha seleccionado ninguna imagen","defaultImage":"usr/themes/cpf/img/cpf-user.png","success":"","destImage":"","draggable":false,"closeButtonClass":"sct-button sct-button-blue cpf-image-edit-button","saveButtonClass":"sct-button sct-button-green cpf-image-edit-button","closeButtonLabel":"Cerrar","saveButtonLabel":"Guardar","width":110,"height":146,"maxHeight":300},"positionImage":{"position":{"left":0,"top":0,"width":0,"height":0}},_create:function(){this._file=$("<input />",{"type":"file","style":"display:none;","name":"tmp_"+this.options.name,"accept":this.options.accept});$(this.element).parent().append(this._file);this.positionImage.position.width=this.options.width;this.positionImage.position.height=this.options.height;$(this._file).bind("change",{that:this},this.loadImage);},_init:function(){var that=this;$(this.element).click(function(){that.openDialog();});},loadImage:function( event ){var image=new FileReader();event.data.that._fileName=event.target.files[0].name;image.onload=(event.data.that.openImage)(event.target.files[0],event.data.that);image.readAsDataURL(event.target.files[0]);},openDialog:function(){$(this._file).click();},openImage:function(file,that){return function(e){that._img=$("<img />",{"src":e.target.result,"id":"cpfUploadCustomerImage"});var imageContent=$("<div />",{"class":"cpf-image-edit-image-content",});var imageMessage=$("<div />",{"class":"pepito","html":that.options.imageMessage});var imageContentCrop=$("<div />",{"class":"cpf-image-edit-image-content-crop",});that.imageEdit=$("<div />",{"class":"cpf-image-edit",}); var buttonContent=$("<div />",{"class":"cpf-image-edit-button-content",});var buttonContentLeft=$("<div />",{"class":"cpf-image-edit-button-content-left",});var buttonContentRight=$("<div />",{"class":"cpf-image-edit-button-content-right",});var closeButton=$("<div />",{"class":that.options.closeButtonClass,"html":that.options.closeButtonLabel}).bind("click",{"that":that},that.close);var saveButton=$("<div />",{"class":that.options.saveButtonClass,"html":that.options.saveButtonLabel}).bind("click",{"that":that},that.save);imageContent.append(imageContentCrop);buttonContentLeft.append(closeButton);buttonContentRight.append(saveButton);that.imageEdit.append(imageContent);that.imageEdit.append(imageMessage);buttonContent.append(buttonContentLeft);buttonContent.append(buttonContentRight);that.imageEdit.append(buttonContent);imageContentCrop.append(that._img);that._img.load(function(){if(that.options.draggable==true){that._img.draggable();that._img.bind("drag",{"that":that},that.imageDrag);that._img.bind("dragstop",{"that":that},that.imageDragStop);imageContent.css("width",that.options.width+"px").css("height",that.options.height+"px");imageContentCrop.css("width",that.options.width+"px").css("height",that.options.height+"px");}else{var percentage=(that.options.maxHeight * 100) / that._img[0].height;var finalWidth=(that._img[0].width * percentage ) / 100;that._img.Jcrop({aspectRatio: 55/73,setDimensions:true,imageWidth:finalWidth,imageHeight:that.options.maxHeight,onSelect:that.jCropSelect,imageInfo:{percentage:percentage,realWidth:that._img[0].width,realHeight:that._img[0].height,finalWidth:finalWidth,finalHeight:that.options.maxHeight,that:that}});}that.imageEdit.dialog({"close":function(){that._file.val("");}});});};},"jCropSelect":function( positions ){var x=positions.x,y=positions.y,w=positions.w,h=positions.h,imageInfo=this.getOptions().imageInfo;var left=(x * 100) / imageInfo.percentage,top=(y * 100) / imageInfo.percentage,width=(w * 100) / imageInfo.percentage;height=(h * 100) / imageInfo.percentage;imageInfo.that.positionImage.position.top=top;imageInfo.that.positionImage.position.left=left;imageInfo.that.positionImage.position.width=width;imageInfo.that.positionImage.position.height=height;},"close":function( event ){event.data.that.imageEdit.dialog("close");},'reset':function(){var label=$(this.options.label);if(label.length > 0 ){label.text(this.options.labelText);}var destImg=$(this.options.destImage);if(destImg.length > 0 ){destImg.attr("src", this.options.defaultImage);}},"save":function( event ){var canvas=document.createElement("canvas");canvas.width=110;canvas.height=146;var context=canvas.getContext("2d");context.drawImage(event.data.that._img.get(0),Math.abs(event.data.that.positionImage.position.left),Math.abs(event.data.that.positionImage.position.top),event.data.that.positionImage.position.width,event.data.that.positionImage.position.height,0,0,event.data.that.options.width,event.data.that.options.height);var destImg=$(event.data.that.options.destImage);if(destImg.length > 0 ){destImg.attr("src", canvas.toDataURL("image/jpeg") );}var label=$(event.data.that.options.label);if(label.length > 0 ){label.text(event.data.that._fileName);}event.data.that.imageEdit.dialog("close");if( typeof event.data.that.options.success=="function" ){event.data.that.element.unbind("CPFUCISuccess");event.data.that.element.bind("CPFUCISuccess",event.data.that.options.success);var imageData=canvas.toDataURL("image/jpeg");var binary=atob(imageData.split(",")[1]);var array=[];  for(var i=0; i < binary.length; i++) {      array.push(binary.charCodeAt(i));  }event.data.that.element.trigger("CPFUCISuccess",new Blob([new Uint8Array(array)],{type:"image/jpeg"}));}},"imageDrag":function( event , ui ){var contentWidth=$(this).parent().width(),contentHeight=$(this).parent().height(),width=$(this).width(),height=$(this).height(),returned=true;if(ui.position.left <=contentWidth - width){returned=false;}if(ui.position.top <=contentHeight - height){returned=false;}if(ui.position.top > 0 || ui.position.left > 0){returned=false;}return returned;},"imageDragStop":function( event , ui ){event.data.that.positionImage.position.left=ui.position.left;event.data.that.positionImage.position.top=ui.position.top;},"_destroy":function(){this._file.remove();$(this.element).unbind("CPFUCISuccess");}});});$(function(){$.widget("pm.jalert",{"options":{"msg":""},"_init":function(){},"_create":function(){var that=this;$(this.element).html(function(){var me=this;var bc=$("<div/>",{"class":"sct-control-button-right"});var button=$("<div/>",{"class":"sct-button sct-button-blue","html":"Cerrar","click":function(){$(me).dialog("close");}});bc.append(button);$(this).append(that.options.msg);$(this).append(bc);});$(this.element).dialog();}});});$(function(){$.widget("pm.jconfirm",{"options":{"msg":"","yesClick":function(){},"noClick":function(){}},"_init":function(){},"_create":function(){var that=this;$(this.element).html(function(){var me=this;var bc=$("<div/>",{"class":"sct-control-button-right"});var yesButton=$("<div/>",{"class":"sct-button sct-button-green","html":"Si","click":function(){that.options.yesClick();$(me).dialog("close");}});var noButton=$("<div/>",{"class":"sct-button sct-button-blue","html":"No","click":function(){that.options.noClick();$(me).dialog("close");}});bc.append(noButton);bc.append(yesButton);$(this).append(that.options.msg);$(this).append(bc);});$(this.element).dialog();}});});$(function(){$.widget("pm.jcrud",{"options":{"urlCreate":"","urlRead":"","urlUpdate":"","urlDelete":"","table":"","dataTable":[],"classDeleteButton":"sct-button sct-button-red","classModifyButton":"sct-button sct-button-blue","modifyButtonText":"Modificar","deleteButtonText":"Eliminar","tiny":[],"inputs":{},"form":"","functions":true,"lang":"es","cleanForm":true,"disableButtons":false,"successMessage":"","errorMessage":"","updateMessage":"","ifDeleteMessage":"","deleteMessage":"","submitProgress":function(){return true;},"submitError":function(){return true;},"submitSuccess":function(){return true;},"submitBeforeSend":function(){return true;}},"_init":function(){var that=this;this.setModify=false;$([   "submitProgress",   "submitError",   "submitSuccess",   "submitBeforeSend"]).each(function(i,a){if( typeof that.options[a]!="function" ){that.options[a]=function(){return true;};}});$(this.options.tiny).each(function(i,a){that._setTiny(a);});this._setJSubmit();if(this.options.functions==true){$("."+this.options.table+"_modify").bind("click",{"jcrud":this},this._clickModidy);$("."+this.options.table+"_delete").bind("click",{"jcrud":this},this._clickDelete);}},"_create":function(){},"_clearForm":function(){$("select,textarea",this.options.form).val("");$("input",this.options.form).each(function(){var type=$(this).attr("type");if(type=="radio" || type=="checkbox"){$(this).removeAttr("checked");}else{$(this).val("");}});},"_clickModidy":function( e ){var jcrud=e.data.jcrud,id=$(this).data("id");jcrud._setModify( this );$.ajax({"url":jcrud.options.urlRead,"data":"&id="+id,"type":"POST","success":function( data ){for( var input in jcrud.options.inputs ){var el=$("."+input,jcrud.options.form);if(el.length==1){$("."+input,jcrud.options.form).val( data[jcrud.options.inputs[input]] );}else if(el.length > 1 ){$(el).attr("checked",false);el.each(function(){if( $(this).val()==data[jcrud.options.inputs[input]]){$(this).trigger("click");}});}else{var o={};o[input]=data[jcrud.options.inputs[input]];jcrud.jsubmitModify.jSubmit("addElement",o);}}}});},"_clickDelete":function( e ){var jcrud=e.data.jcrud,id=$(this).data("id"),tr=$(this).parent().parent(),tbody=tr.parent(); $("<div/>",{"html":function(){var that=this;var buttonContainer=$("<div/>",{    "class":"sct-control-button-right"    });        var noButton=$("<div/>",{    "class":"sct-button sct-button-blue",    "html":"No",    "click":function(){    $(that).dialog("close");    }    });        var yesButton=$("<div/>",{    "class":"sct-button sct-button-red",    "html":"Sí",    "click":function(){        $.ajax({    "url":jcrud.options.urlDelete,    "data":"&id="+id,    "type":"POST",    "success":function( data ){        if( data["delete"] ){        jcrud._clearForm();        if(jcrud.setModify==true){        jcrud._unsetModify();    }        tr.remove();        $(that).dialog("close");        $("<div/>",{    "html":function(){        var me=this;    var bc=$("<div/>",{        "class":"sct-control-button-right"        });        var button=$("<div/>",{        "class":"sct-button sct-button-blue",        "html":"Cerrar",        "click":function(){        $(me).dialog("close");        }        });        bc.append(button);            $(this).append(jcrud.options.deleteMessage);            $(this).append(bc);                if(tbody.children().length==0){                tbody.append(data.noResults);        }    }    }).dialog();    }    }    });    }    });        buttonContainer.append(noButton);        buttonContainer.append(yesButton);        $(this).append(jcrud.options.ifDeleteMessage);        $(this).append(buttonContainer);}}).dialog();},"_setDataTable":function( data , replace ){var tbody=$("#"+this.options.table+" tbody"),tr=$("<tr/>");for(var row in this.options.showInTable){tr.append( "<td>"+data[this.options.showInTable[row]]+"</td>" );}if( this.options.functions==true ){var tdFunc="<td><div data-id='"+data.id+"' class='"+this.options.table+"_modify "+this.options.classModifyButton+"'>Modificar</div>\n"+"<div data-id='"+data.id+"' class='"+this.options.table+"_delete "+this.options.classDeleteButton+"'>Eliminar</div></td>";tr.append( tdFunc );/* *  * decidir por fin como va esto if( replace&&replace.length > 0 ){replace.replaceWith( tr );}else{tbody.append( tr );}*/$("."+this.options.table+"_modify").unbind("click");$("."+this.options.table+"_delete").unbind("click");$("."+this.options.table+"_modify").bind("click",{"jcrud":this},this._clickModidy);$("."+this.options.table+"_delete").bind("click",{"jcrud":this},this._clickDelete);}if( replace&&replace.length > 0 ){replace.replaceWith( tr );}else{tbody.append( tr );}if($("#"+this.options.table+"_null").length > 0){$("#"+this.options.table+"_null").remove();}},"_setModify":function( button ){var jcrud=this;if(jcrud.setModify==false){jcrud.jsubmit.jSubmit("destroy");jcrud.jsubmit.hide();}else{jcrud._unsetModify( true );}jcrud.setModify=true;jcrud.back=$("<div />",{"class":"sct-button","html":"Regresar","click":function(){jcrud._clearForm();jcrud._unsetModify();}});jcrud.jsubmitModify=$("<div/>",{"html":"Modificar","class":jcrud.options.classModifyButton}).jSubmit({"form":jcrud.options.form,"url":jcrud.options.urlUpdate,"success":function( data ){if(button){$(button).parent().parent().append();jcrud._setDataTable(data , $(button).parent().parent());}jcrud._clearForm();jcrud._unsetModify();$("<div/>",{"html":function(){var me=this;var bc=$("<div/>",{    "class":"sct-control-button-right"    });var button=$("<div/>",{    "class":"sct-button sct-button-blue",    "html":"Cerrar",    "click":function(){    $(me).dialog("close");    }    });bc.append(button);    $(this).append(jcrud.options.updateMessage);    $(this).append(bc);}}).dialog();}});var buttonContent=jcrud.jsubmit.parent();buttonContent.append(jcrud.back);buttonContent.append(jcrud.jsubmitModify);},"_unsetModify":function( noJSubmit ){var jcrud=this;jcrud.setModify=false;$(jcrud.jsubmitModify).jSubmit("destroy");$(jcrud.jsubmitModify).remove();if(!jcrud.jsubmit.is(":visible")&&!noJSubmit ){jcrud.jsubmit.show();jcrud._setJSubmit();}jcrud.back.unbind("click");jcrud.back.remove();},"_setJSubmit":function(){var jcrud=this;this.jsubmit=$(jcrud.element).jSubmit({"form":jcrud.options.form,"url":jcrud.options.urlCreate,"error":function(){if(jcrud.options.submitError()){}},"beforeSend":function( xhr , opts ){if(jcrud.options.submitBeforeSend( xhr , opts )){}},"success":function( data ){if(jcrud.options.submitSuccess( data )){if( jcrud.options.cleanForm ){jcrud._clearForm();}jcrud._setDataTable( data );$("<div/>",{"html":function(){var me=this;var bc=$("<div/>",{    "class":"sct-control-button-right"    });var button=$("<div/>",{    "class":"sct-button sct-button-blue",    "html":"Cerrar",    "click":function(){    $(me).dialog("close");    }    });bc.append(button);    $(this).append(jcrud.options.successMessage);    $(this).append(bc);}}).dialog();}}});},"_setTiny":function( element ){$( element ).newTiny();}});});$(function(){$.widget("pm.jcrud2",{"options":{"createURL":"","readURL":"","updateURL":"","deleteURL":"","connMessageError":"Lo sentimos, se ha generado un error, por favor, vuelva a intentarlo","modifyButtonClass":"sct-button sct-button-blue","modifyButtonText":"Modificar","backButtonClass":"sct-button","backButtonText":"Regresar","controls":{},"filedId":null,"alertMessages":{"delete":true,"deleted":true,"update":false,"updated":true,"create":false,"created":true,},"messages":{"delete":"¿Está seguro que desea eliminar este registro?","deleted":"El registro se ha eliminado con éxito.","update":"¿Está seguro que desea modificar este registro?","updated":"El registro se ha modificado con éxito.","create":"¿Está seguro que desea guardar este registro?","created":"El registro se ha guardado con éxito.",},"table":{"id":"","fields":[],"functions":true,"limit":10,"deleteButtonClass":"sct-button sct-button-red","deleteButtonText":"Eliminar","modifyButtonClass":"sct-button sct-button-blue","modifyButtonText":"Modificar"},"tiny":[],"formId":""},"active":false,"data":null,"table":null,"_create":function(){this.modify=$("<div />",{"html":this.options.modifyButtonText,"class":this.options.modifyButtonClass});this.back=$("<div />",{"html":this.options.backButtonText,"class":this.options.backButtonClass});$(this.options.tiny).each(function( a , i ){if($(i).length > 0 ){$(i).newTiny();}});if( $("#"+this.options.table.id).length > 0 ){this.table=$("#"+this.options.table.id);}},"_init":function(){$(this.element).jSubmit({"url":this.options.createURL,"form":"#"+this.options.formId,"callbackObject":this,"success":"saveSuccessjSubmit","beforeSend":function(){}});$(this.modify).jSubmit({"url":this.options.updateURL,"form":"#"+this.options.formId,"callbackObject":this,"success":"updateSuccessjSubmit","beforeSend":function(){}});this.modify.hide();this.back.hide();$(this.element).parent().prepend(this.modify);$(this.element).parent().prepend(this.back);this.back.bind("click",{"that":this},this.backClick);if(this.table){this.table.jdtable({"fields":this.options.table.fields,"functions":this.options.table.functions,"limit":this.options.table.limit,"callbackObject":this,"functionsBTN":{"modifyClick":"tableModifyClick","modifyClass":this.options.table.modifyButtonClass,"modifyText":this.options.table.modifyButtonText,"deleteClick":"tableDeleteClick","deleteClass":this.options.table.deleteButtonClass,"deleteText":this.options.table.deleteButtonText,}});}this.readData();},"backClick":function( e ){var that=e.data.that;that.setStart();},"updateSuccessjSubmit":function( response ){if( !response.err ){if( this.options.alertMessages.updated ){$("<div />",{"html":this.options.messages.updated}).jalert();}this.setStart();this.readDataFunc(response.data);}else{this.errorNotify("update");}},"cleanForm":function(){$("input, select,textarea",$("#"+this.options.formId) ).val("");},"saveSuccessjSubmit":function( response ){if( !response.err ){if( this.options.alertMessages.created ){$("<div />",{"html":this.options.messages.created}).jalert();}this.cleanForm();this.readDataFunc(response.data);}else{this.errorNotify("save");}},"tableModifyClick":function( field ){if(field[this.options.filedId]){this.modify.show();this.back.show();$(this.element).hide();var id={};id[this.options.filedId]=field[this.options.filedId];this.modify.jSubmit("addElement", id );if(typeof this.options.controls=="object" ){for(var i in this.options.controls){$("[name='"+i+"']",$("#"+this.options.formId)).val(field[this.options.controls[i]]);}}}else{this.fieldIdError();}},"tableDeleteClick":function( field ){var that=this;if( this.options.alertMessages["delete"] ){$("<div />",{"html":this.options.messages["delete"]}).jconfirm({"yesClick":function(){that.deleteData(field);}});}else{that.deleteData(field);}},"deleteData":function( field ){var send={};if( field[this.options.filedId] ){send[this.options.filedId]=field[this.options.filedId];this.conn(this.options.deleteURL, send , "deleteDataFunc" );}else{this.fieldIdError();}},"fieldIdError":function(){$("<div />",{"html":"No se puede eliminar el registro. fieldId no establecido."}).jalert();},"deleteDataFunc":function( response ){if(!response.err){if( this.options.alertMessages["deleted"] ){$("<div />",{"html":this.options.messages["deleted"]}).jalert();}this.setStart();this.readDataFunc( response.data );}else{this.errorNotify("delete");}},"setStart":function(){this.cleanForm();this.modify.hide();this.back.hide();$(this.element).show();},"readData":function(){this.conn(this.options.readURL, {}, "readDataFunc" );},"readDataFunc":function( response ){if(this.table){this.table.jdtable( "option" , "data" , response );this.table.jdtable("refresh");}},"errorNotify":function( info ){$("<div />",{"html":"<b>Se ha generado un error.</b><br>"+"<p style='width:340px;text-align:justify;'>"+"Ya hemos notificado al administrador de este inconveniente. "+"Le invitamos a que intente nuevamente. "+"Pedimos disculpas por las molestias causadas.</p>"}).jalert();},"conn":function( url , data , func ){var that=this;$.ajax({"url":url,"data":data,"type":"POST","success":function( response ){that[func](response);},"error":function(){$("<div />",{"html":this.options.connMessageError}).jalert();}});}});});$(function(){$.widget("pm.jdtable",{"options":{"url":"","data":[],"trDataId":null,"startOnInit":false,"searchInputId":"pm-search","nextControlId":"pm-next","prevControlId":"pm-prev","limitControlId":"pm-limit","fieldControlId":"pm-field","labelId":"pm-label","callbackObject":null,"limit":10,"nullMessage":"No se han encontrado registros.","fields":[],"notReadyAlertMessage":"Por favor, espere mientras se cargan los datos.","sort":null,"functions":false,"functionsBTN":{"dataIdField":"","modifyClass":"sct-button sct-button-blue","modifyText":"Modificar","modifyClick":function(){},"deleteClass":"sct-button sct-button-red","deleteText":"Eliminar","deleteClick":function(){}},"defaultAlert":true,"filter":function(){},"refillStart":function(){},"refillEnd":function(){},"alert":function(){}},"label":null,"input":null,"next":null,"prev":null,"aQ":null,"aQA":null,"aQC":null,"limitSelect":null,"fieldSelect":null,"tbody":null,"ready":false,"currentSort":null,"sliceStart":0,"sliceEnd":0,"slicePage":0,"_create":function(){var that=this;$(["filter","refillStart","refillEnd","alert"]).each(function(){if(typeof that.options[this]!=="function"){that.options[this]=function(){};}});if(typeof this.options.fields!="object"){this.options.fields=[];}this.label=$("#"+this.options.labelId,this.element);this.input=$("#"+this.options.searchInputId,this.element);this.next=$("#"+this.options.nextControlId,this.element);this.prev=$("#"+this.options.prevControlId,this.element);this.limitSelect=$("#"+this.options.limitControlId,this.element);this.fieldSelect=$("#"+this.options.fieldControlId,this.element);this.tbody=($("tbody",this.element).length > 0 ? $("tbody",this.element) : $(this.element));this.thead=$("thead",this.element);this.currentSort=this.options.sort;this.sliceEnd=this.options.limit;},"_init":function(){this.input.bind( "keyup" , { "that":this } , this._search );this.next.bind("click" , { "that":this } , this._nextClick );this.prev.bind("click" , { "that":this } , this._prevClick );this.limitSelect.bind("change" , { "that":this } , this._limit );this.fieldSelect.bind("change" , { "that":this } , this._fieldChange );this._ajax();},"_fieldChange":function( e ){var that=e.data.that;that.input.trigger("keyup");},"_prevClick":function( e ){var that=e.data.that;if( that.ready ){if(that.sliceStart > 0){that._tableRefill( that.aQC , -1 );}}else{that.alert(that.options.notReadyAlertMessage);}},"_nextClick":function( e ){var that=e.data.that;if( that.ready ){if(that.sliceEnd < that.aQC.length){that._tableRefill( that.aQC , 1 );}}else{that.alert(that.options.notReadyAlertMessage);}},"_search":function( e ){var that=e.data.that;var aF=null;if( that.ready ){if( ($(this).val()).trim()!=""  ){if( that.fieldSelect.length > 0&&that.fieldSelect.val()!="" ){aF=that.aQ.find( that.fieldSelect.val() , $(this).val() );}else{aF=that.aQ.findArray( $(this).val() );}that._tableRefill( aF , 0 );}else{that._tableRefill( that.aQ , 0 );}}else{that.alert(that.options.notReadyAlertMessage);}},"_calculeSlice":function( ){this.sliceStart=0;this.sliceEnd=0;if( this.aQC.length > 0 ){this.sliceStart=(this.options.limit * this.slicePage );if(this.sliceStart  > this.aQC.length){this.sliceStart=0;}this.sliceEnd=( ( this.sliceStart ) *1 ) + ( ( this.options.limit ) * 1 );if(this.sliceEnd > this.aQC.length){this.sliceEnd=this.aQC.length;}}},"_tableRefill":function( data , page  ){var that=this;that.options.refillStart();that.aQC=data;that.slicePage +=page;that._calculeSlice();that.tbody.html("");if(that.currentSort){data=data.sort( that.currentSort );}data=data.slice( that.sliceEnd , that.sliceStart );if( data.length > 0 ){if(that.options.customRefill&&typeof that.options.customRefill=="function"){$( data.get() ).each(function(){var tr="<tr>";tr +=that.options.customRefill(this);tr +="</tr>";that.tbody.append(tr);});}else{$( data.get() ).each(function(){var tr=$("<tr />");for(var i in that.options.fields){tr.append("<td>"+this[that.options.fields[i]]+"</td>");}if( that.options.functions===true ){var modifyButton=$("<div />",{"data-id":( that.options.functionsBTN.dataIdField!="" ? this[that.options.functionsBTN.dataIdField]: ""),"class":"jdtable-modify "+that.options.functionsBTN.modifyClass,"html":that.options.functionsBTN.modifyText});modifyButton.data("field",this);var deleteButton=$("<div />",{"data-id":( that.options.functionsBTN.dataIdField!="" ? this[that.options.functionsBTN.dataIdField]: ""),"class":"jdtable-delete "+that.options.functionsBTN.deleteClass,"html":that.options.functionsBTN.deleteText});deleteButton.data("field",this);tr.append(modifyButton);tr.append(deleteButton);}that.tbody.append(tr);});}}else{var colspanLength=(that.options.fields).length;if( that.options.functions ){++colspanLength;}if( !(that.options.fields).length ){colspanLength=$("th",that.thead).length; }that.tbody.html("<tr><td colspan='"+colspanLength+"'>"+that.options.nullMessage+"</td></tr>");}var start=( that.aQC.length==0 ? 0 : ( that.sliceStart + 1 ) );that.label.html("Mostrando desde "+(start)+" hasta "+that.sliceEnd+" de "+that.aQC.length+" registros");that.setFunctions();that.options.refillEnd();},"setFunctions":function(){var modify=$(".jdtable-modify",this.element),del=$(".jdtable-delete",this.element);if( modify.length > 0 ){modify.bind("click",{"that":this},this.modifyButtonClick);}if( del.length > 0 ){del.bind("click",{"that":this},this.deleteButtonClick);}},"modifyButtonClick":function( e ){var that=e.data.that;if(that.options.callbackObject&&typeof that.options.callbackObject[that.options.functionsBTN.modifyClick]=="function" ){that.options.callbackObject[that.options.functionsBTN.modifyClick]( $(this).data( "field" ) );}else if(typeof that.options.functionsBTN.modifyClick=="function"){that.options.functionsBTN.modifyClick( $(this).data( "field" ) );}},"deleteButtonClick":function( e ){var that=e.data.that;if(that.options.callbackObject&&typeof that.options.callbackObject[that.options.functionsBTN.deleteClick]=="function" ){that.options.callbackObject[that.options.functionsBTN.deleteClick]( $(this).data( "field" ) );}else if(typeof that.options.functionsBTN.deleteClick=="function"){that.options.functionsBTN.deleteClick( $(this).data( "field" ) );}},"reload":function( func ){var ready=false;if( this.ready ){if(typeof func=="function"){this.aQ=func( this.aQA );if( !this.aQ ){this.aQ=this.aQA;}}this.input.val("");this.input.trigger("keyup");ready=true;}else{this.alert(this.options.notReadyAlertMessage);}return ready;},"_limit":function( e ){var that=e.data.that;that.options.limit=$(this).val();that.input.trigger("keyup");},"refresh":function(){this.input.val("");this.options.startOnInit=true;this.ready=false;this._ajax();},"alert":function(message){if(this.options.defaultAlert){$("<div/>",{"html":message}).jalert();}else{this.options.alert( message );}},"_ajax":function(){var that=this;if(that.options.url!=""){$.ajax({"url":that.options.url,"success":function( data ){that._setArray( data );}});}else{that._setArray( that.options.data );}},"_setArray":function( data ){var that=this;that.aQA=new arrayQuery(data);that.aQ=that.options.filter( that.aQA );if( !that.aQ ){that.aQ=that.aQA;}that.aQC=that.aQ;that.ready=true;if( that.options.startOnInit ){that.input.trigger("keyup");}}});});(function($){$.jGET=function( str ){var search=(window.location.search).replace(/^\?/, '' ).split("&"),object={},i;for( i in search ){var searchSplit=(search[i]).split("=");object[searchSplit[0]]=searchSplit[1];}if( str ){object=object[str];}return object;};}($));$(function(){$.widget("pm.jmenu",{"options":{"activeClass":"sct-navbar-vertical-active","tab":true,"tabClass":".sct-navbar-tab","dataTarget":"data-target","getTarget":"target","beforeChange":function(){},"afterChange":function(){}},"liAll":"","response":false,"_create":function(){var that=this;$(["beforeChange","afterChange"]).each(function(){if(typeof that.options[this]!="function"){that.options[this]=function(){};}});this.liAll=$("ul li", this.element);this.liAll.bind("click",{"that":this},this.liClick);this.liAll.bind("beforeChange",{"that":this},this.options.beforeChange);this.liAll.bind("afterChange",{"that":this},this.options.afterChange);},"_init":function(){var target=$.jGET(this.options.getTarget),li=$("ul li["+this.options.dataTarget+"='"+target+"']",this.element);if( target&&li.length > 0 ){li.trigger("click");}},"liClick":function( e ){var that=e.data.that;response={"change":true};$(this).trigger( "beforeChange" , response );if( response.change ){that.liAll.removeClass(that.options.activeClass);$(this).addClass(that.options.activeClass);if(that.options.tab==true){$(that.options.tabClass).hide();$("#"+$(this).attr(that.options.dataTarget)).show();}}$(this).trigger( "afterChange" , response.change );}});});$(function(){var _datasets={"required":"required","pattern":"pattern","equals":"equals","type":"type","regexp":"regexp","spanId":"spanId","errorClass":"errorClass","errorMessage":"errorMessage","errorMessageMaxWidth":"errorMessageMaxWidth","validationArray":"validationArray","showErrorMessage":"showErrorMessage"};var _patterns={"email":/\S+@\S+\.\S+/,"number":/^\d+$/,"date":/^\d{1,2}\/\d{1,2}\/\d{4}$/};$.widget("pm.jSubmit",{options:{"url":false,"addElemnt":{},"onChange":true,"showErrorMessage":true,"form":"","eventShowErrorMessage":"click","positionType":"offset","spanErrorClass":"sct-control-error-label","elementErrorClass":"sct-control-error","callbackObject":null,"messages":{"required":"Este campo es requerido",},"datasets":{},"progress":function(){},"error":function(){},"success":function(){},"beforeSend":function(){}},"_destroy":function(){var elements=$("*[data-pm-submit='true']",$(this.options.form));elements.each(function(){$(this).unbind("click");$(this).unbind("blur");$(this).unbind("focus");$(this).unbind("change");$(this).unbind("keypress");$(this).unbind("keyup");$(this).unbind("keydown");$(this).unbind("validate");$(this).removeAttr("data-pm-submit");});$(this.element).unbind("click");delete elements;},"_create":function(){this._form=new FormData();this._newElements={};this._elements={"validate":{"group":{"input":[]},"noGroup":{"input":[],"select":[],"textarea":[]}},"noValidate":{"group":{"input":[]},"noGroup":{"input":[],"select":[],"textarea":[]}}};var that=this;if(typeof this.options.datasets!="object"){this.options.datasets={};}this.options.datasets=$.extend(_datasets,this.options.datasets);var _form=$(this.options.form);$("input,select,textarea",_form).each(function(){that._checkValidateElements(this);});$(_form).submit(function( e ){if (window.event){        e.cancelBubble=true;                e.returnValue=false;    }    else if (e.stopPropagation){            e.stopPropagation();                e.preventDefault();    }return false;});this._configureElements();this.addElement(this.options.addElemnt);$(this.element).bind( "click" , {"that":this} ,this._submit );},"setErrorMessage":function( control , message ){var span=$("#"+control, $(this.options.form)).data('spanId');if( $("#"+control, $(this.options.form)).length=1 ){if( message ){$('#'+span).html(message);}else{$('#'+span).html(this.options.messages.required);}}},"_configureElements":function(){var that=this;for(var i in that._elements.validate){switch (i) {case "group":for(var o in that._elements.validate.group.input){var id="span_"+(Math.floor(Math.random() * (9999999999 - 1000000000 + 1)) + 1000000000),name=that._elements.validate.group.input[o],element=$("input[name='"+name+"']");element=$(element.get(element.length - 1));that._setElement(id, name, element, that);}break;case "noGroup":for(var o in that._elements.validate.noGroup){for( var u in that._elements.validate.noGroup[o]){var id="span_"+(Math.floor(Math.random() * (9999999999 - 1000000000 + 1)) + 1000000000),name=that._elements.validate[i][o][u],element=$(o+"[name='"+name+"']");that._setElement(id, name, element, that);}}break;}}},"_setElement":function(id , name , element , that ){var elTop=element.offset().top,elLeft=element.offset().left,whiteSpace="normal";if(that.options.positionType=="position"){elTop=element.position().top + (element.css("marginTop").replace("px","") * 1) ;elLeft=element.position().left;whiteSpace="pre";}var messageSpan=$("<span />",{"id":id,"class": that.options.spanErrorClass,"css":{"position":"absolute","opacity":"0","display":"none","z-index":"100","transition":"opacity 0.2s linear","max-width":($(element).data(that.options.datasets.errorMessageMaxWidth) || "auto" ),"top":elTop+"px","white-space":whiteSpace,"left":( elLeft + element.outerWidth() + 10 )+"px",},"html": $(element).data(that.options.datasets.errorMessage) || that.options.messages.required});element.bind( "blur" , {"that":this} , this._setEventBlur );element.bind( "focus" , {"that":this} , this._setEventFocus );element.bind( "change" , {"that":this} , this._setEventChange );element.bind( "keyup" , {"that":this} , this._setEventKeyUp );element.bind( "keydown" , {"that":this} , this._setEventKeyDown );element.bind( "validate" , {"that":this} , this._validate );element.data(this.options.datasets.spanId, id );if( element.data(this.options.datasets.equals) ){element.bind( "paste" ,function(){return false;});}element.attr("data-pm-submit","true");element.parent().append(messageSpan);},"_setEventKeyDown":function( e ){var isReturn=true;if(typeof $(this).data("limit")=="number"&&$(this).data("limit") > 0){if( ( ($(this).val()).length )==$(this).data("limit")&&e.keyCode!=8 ){isReturn=false;}}return isReturn;},"_setEventBlur":function( e ){var datasets=e.data.that.options.datasets,span=$("#"+$(this).data( datasets.spanId ));span.css("opacity","0");setTimeout(function(){span.css("display","none");},200);},"_setEventFocus":function( e ){var datasets=e.data.that.options.datasets,span=$("#"+$(this).data( datasets.spanId ));if($(this).trigger("validate").data("jSubmitValidate")==false ){span.css("display","inline");setTimeout(function(){span.css("opacity","1");},100);}},"_setEventChange":function( e ){var datasets=e.data.that.options.datasets,span=$("#"+$(this).data( datasets.spanId ));if($(this).trigger("validate").data("jSubmitValidate")==false ){span.css("opacity","1");}else{span.css("opacity","0");}},"_setEventKeyUp":function( e ){var datasets=e.data.that.options.datasets,span=$("#"+$(this).data( datasets.spanId ));if($(this).trigger("validate").data("jSubmitValidate")==false ){span.css("opacity","1");}else{span.css("opacity","0");}if(typeof $(this).data("limit")=="number"&&$(this).data("limit") > 0){if(( ($(this).val()).length ) > $(this).data("limit")){$(this).val( ($(this).val()).substr(0, $(this).data("limit")) );}}},"_submit":function( e ){var that=e.data.that,success=that._validateAllElements();if( that.options.url!=false&&that.options.url!=""&&success==true){$.ajax({"url":that.options.url,"dataType":"json","data":that._getAllElements(),"processData":false,"contentType":false,"type":"POST","xhrFields":{onprogress:function(progress){if(progress.lengthComputable){var percentage=(progress.loaded / progress.total) * 100;if( that.options.callbackObject&&typeof that.options.callbackObject[that.options.progress]=="function"){that.options.callbackObject[that.options.progress]( percentage );}else if(typeof that.options.progress=="function"){that.options.progress(percentage);}}}},"beforeSend":function( xhr , opts ){if( that.options.callbackObject&&typeof that.options.callbackObject[that.options.beforeSend]=="function" ){that.options.callbackObject[that.options.beforeSend]( xhr , opts );}else if(typeof that.options.beforeSend=="function" ){that.options.beforeSend( xhr , opts );}},"success":function( data ){if( that.options.callbackObject&&typeof that.options.callbackObject[that.options.success]=="function" ){that.options.callbackObject[that.options.success]( data );}else if(typeof that.options.success=="function" ){that.options.success( data );}}});}return false;},"_checkValidateElements":function( element ){var elementValidate="noValidate",elementGroup="noGroup",elementName=$(element).attr("name"),tagName=(element.tagName).toLowerCase(),that=this;if( tagName=="input"&&$(element).attr("type")=="radio" || $(element).attr("type")=="checkbox"){var realElement=$("input[name='"+$(element).attr("name")+"']");elementGroup="group";realElement.each(function(){if($(this).data(that.options.datasets.required)=="isVisible" ||$(this).data(that.options.datasets.required)=="required" ||typeof $(this).data(that.options.datasets.pattern)!="undefined" ||typeof $(this).data(that.options.datasets.equals)!="undefined" ||typeof $(this).data(that.options.datasets.type)!="undefined" ||typeof $(this).data(that.options.datasets.validationArray)!="undefined"){elementValidate="validate";}});}else{if($(element).data(that.options.datasets.required)=="isVisible" ||$(element).data(that.options.datasets.required)=="required" ||typeof $(element).data(that.options.datasets.pattern)!="undefined" ||typeof $(element).data(that.options.datasets.equals)!="undefined" ||typeof $(element).data(that.options.datasets.type)!="undefined" ||typeof $(element).data(that.options.datasets.validationArray)!="undefined"){elementValidate="validate";}}if(that._elements[elementValidate][elementGroup][tagName].indexOf(elementName)==-1 ){that._elements[elementValidate][elementGroup][tagName].push(elementName);}},"_validateAllElements":function(){var sendForm=true,elements=$("*[data-pm-submit='true']",$(this.options.form)),el=false;elements.each(function(){if(!$(this).trigger("validate").data("jSubmitValidate")){sendForm=false;if(!el){el=$(this);}}});if( sendForm==false ){var move=$("body").scrollTop() > 0 ? $("body") : $("html");move.animate({scrollTop:Math.floor(el.offset().top) - 60},"slow");}return sendForm;},"setRegExp":function( control , regexp ){if( $("#"+control, $(this.options.form)).length=1 ){$("#"+control, $(this.options.form)).data(this.options.datasets.regexp,regexp);}},"_validate":function( e , isArray , arraySuccess ){var success=true,that=e.data.that;me=$(this);if(typeof me.data(that.options.datasets.validationArray)!="undefined"){var arrayParentElements=(me.data(that.options.datasets.validationArray)).split(",");for(var e in arrayParentElements){if(!$("#"+arrayParentElements[e]).data("jSubmitArrayValidation")){$("#"+arrayParentElements[e]).data("jSubmitArrayValidation",arrayParentElements);}}}success=that._validateArrays(me, isArray , success );if(typeof me.data(that.options.datasets.type)!="undefined"&&typeof _patterns[me.data(that.options.datasets.type)]!="undefined"&&(me.val()).trim()!=""){success=that._validatePattern( ((me.val()).trim()) , _patterns[me.data(that.options.datasets.type)] );}if(typeof me.data(that.options.datasets.regexp)!="undefined"){success=that._validatePattern( ((me.val()).trim()) , me.data(that.options.datasets.regexp) );}if(me.data(that.options.datasets.equals)!="undefined"&&$("#"+me.data(that.options.datasets.equals)).length > 0&&(me.val()).trim()!=""){success=that._validateEquals((me.val()).trim(),($("#"+me.data(that.options.datasets.equals)).val()).trim());}if(me.data(that.options.datasets.required)=="required"&&(me.val()).trim()=="" ){success=false;}if(me.data(that.options.datasets.required)=="isVisible"&&(me.val()).trim()==""&&me.is(":visible")){success=false;}if( arraySuccess===false ){success=false;}if(me.data(that.options.datasets.required)=="isVisible"&&!me.is(":visible")){success=true;}if( success ){me.removeClass( me.data(that.options.datasets.errorClass) );me.removeClass( that.options.elementErrorClass );}else{me.addClass( me.data(that.options.datasets.errorClass) || that.options.elementErrorClass);}$(this).data("jSubmitValidate",success);},"_validateArrays":function( me , isArray , arraySuccess ){var success=true;if(me.data("jSubmitArrayValidation")){var av=me.data("jSubmitArrayValidation"),avTrue=new Array,avFalse=new Array;for(var avI in av ){if( ($("#"+av[avI]).val()).trim()!="" ){avTrue.push(avI);}else{avFalse.push(avI);}}if( avFalse.length!=av.length&&avTrue.length!=av.length){success=false;}if( typeof isArray=="undefined"){for(var avI in av ){$("#"+av[avI]).trigger("validate",[true,success]);if( success==false ){$("#"+av[avI]).trigger("validate",[true,success]);}}}}return success;},"_validateEquals":function( string1 , string2 ){var equals=true;if(string1!=string2 ){equals=false;}return equals;},"_validatePattern":function( string , pattern ){return pattern.test(string);},"showError":function(){},"_getAllElements":function(){var data=$(this.options.form).serializeArray();var form=new FormData();for(var i in this._newElements){form.append( i, this._newElements[i] );}for(var i in data ){form.append( data[i].name,  data[i].value );}return form;},"addElement":function( element ){for(i in element ){this._newElements[i]=(element[i]);}}} );});$(function(){$.widget("pm.jtooltip",{"options":{"html":"","enter":function(){},"leave":function(){},},"tooltip":"","_init":function(){var that=this;$(that.element).bind("mouseenter",{"that":that},that._enter);$(that.element).bind("mouseleave",{"that":that},that._leave);$(that.element).bind("enter",that.options.enter);$(that.element).bind("leave",that.options.leave);that.tooltip.html(that.options.html);},"_create":function(){var that=this;var callbacks=["enter","leave"];$(callbacks).each(function( i , a ){if(typeof that.options[this]!="function"){that.options[this]=function(){};}});$(this.element).attr("data-pm-jtooltip","true");this.tooltip=$("<div/>",{"class":"sct-dialog sct-tooltip pm-jtooltip","style":"position:fixed;"});$(this.tooltip).hide();$("body").append(this.tooltip);},"html":function(html){this.tooltip.html(html);},"_enter":function( e ){var that=e.data.that;$(that.element).trigger("enter");$(that.tooltip).css("left",($(this).offset().left - $(window).scrollLeft())+"px").css("top",($(this).offset().top - $(window).scrollTop() + 20)+"px").show();},"_leave":function( e ){var that=e.data.that;$(that.element).trigger("leave");$(that.tooltip).hide();},"_destroy":function(){$(this.element).removeAttr("data-pm-jtooltip");$(this.element).unbind("mouseenter");$(this.element).unbind("mouseleave");$(this.element).unbind("enter");$(this.element).unbind("leave");$(this.tooltip).remove();},"destroyAll":function(){var tooltips=$(".pm-jtooltip");var allElements=$("*[data-pm-jtooltip='true']");if(tooltips.length > 0 ){$(tooltips).each(function(){$(this).remove();});}if(allElements.length > 0 ){$(allElements).each(function(){$(this).jtooltip("destroy");});}}});});$(function(){$.widget("pm.newTiny",{"options":{"toolbar1":null,"toolbar2":null,"height":300},"_init":function(){},"_create":function(){$( this.element ).tinymce({"language":"es","theme":"modern","height":this.options.height,"plugins":"textcolor","menubar":"edit format","toolbar":["bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | forecolor backcolor"]});}});});String.prototype={"trim":function(){return this.replace(/^\s+|\s+$/g, '');}};